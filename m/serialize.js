function serialize(e){var r,a,n="",t=0,o=function(e){var r,a,n,t,o=typeof e;if("object"===o&&!e)return"null";if("object"===o){if(!e.constructor)return"object";for(a in(r=(n=e.constructor.toString()).match(/(\w+)\(/))&&(n=r[1].toLowerCase()),t=["boolean","number","string","array"])if(n===t[a]){o=t[a];break}}return o},i=o(e);switch(i){case"function":r="";break;case"boolean":r="b:"+(e?"1":"0");break;case"number":r=(Math.round(e)===e?"i":"d")+":"+e;break;case"string":r="s:"+~-encodeURI(e).split(/%..|./).length+':"'+e+'"';break;case"array":case"object":for(a in r="a",e)if(e.hasOwnProperty(a)){if("function"===o(e[a]))continue;n+=serialize(a.match(/^[0-9]+$/)?parseInt(a,10):a)+serialize(e[a]),t++}r+=":"+t+":{"+n+"}";break;case"undefined":default:r="N"}return"object"!==i&&"array"!==i&&(r+=";"),r}
